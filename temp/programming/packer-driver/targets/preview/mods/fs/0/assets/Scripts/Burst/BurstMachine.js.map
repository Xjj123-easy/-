{"version":3,"sources":["file:///E:/cocosproject/Dome/cocos-start-demo/assets/Scripts/Burst/BurstMachine.ts"],"names":["_decorator","Animation","PARAMS_NAME_ENUM","State","GetParamsNUmber","GetParamsTrigger","StateMachine","ccclass","property","BaseUrl","BurstMachine","init","animationComponent","node","addComponent","initParams","initStateMachine","initEventMachine","Promise","all","waitingList","param","set","IDLE","DRIECTION","ATTACK","DEATH","stateMachine","run","currentState","get","value"],"mappings":"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","sourcesContent":["import { _decorator, Animation } from 'cc'\nimport { ENTINY_STATE_ENUM, PARAMS_NAME_ENUM } from '../../Enums'\nimport { EnityManger } from '../Base/EnityManger'\nimport { State } from '../Base/State'\nimport { GetParamsNUmber, GetParamsTrigger, StateMachine } from '../Base/StateMachine'\n\nconst { ccclass, property } = _decorator\nconst BaseUrl = 'texture/burst'\n@ccclass('BurstMachine')\nexport class BurstMachine extends StateMachine {\n  async init() {\n    this.animationComponent = this.node.addComponent(Animation)\n\n    this.initParams()\n\n    this.initStateMachine()\n\n    this.initEventMachine()\n\n    await Promise.all(this.waitingList)\n  }\n\n  initEventMachine() {}\n\n  //初始化状态机参数\n  initParams() {\n    this.param.set(PARAMS_NAME_ENUM.IDLE, GetParamsTrigger())\n    this.param.set(PARAMS_NAME_ENUM.DRIECTION, GetParamsNUmber())\n    this.param.set(PARAMS_NAME_ENUM.ATTACK, GetParamsTrigger())\n    this.param.set(PARAMS_NAME_ENUM.DEATH, GetParamsTrigger())\n  }\n\n  initStateMachine() {\n    this.stateMachine.set(PARAMS_NAME_ENUM.IDLE, new State(this, `${BaseUrl}/idle`))\n    this.stateMachine.set(PARAMS_NAME_ENUM.ATTACK, new State(this, `${BaseUrl}/attack`))\n    this.stateMachine.set(PARAMS_NAME_ENUM.DEATH, new State(this, `${BaseUrl}/death`))\n  }\n  run() {\n    switch (this.currentState) {\n      case this.stateMachine.get(PARAMS_NAME_ENUM.IDLE):\n      case this.stateMachine.get(PARAMS_NAME_ENUM.DEATH):\n      case this.stateMachine.get(PARAMS_NAME_ENUM.ATTACK):\n        if (this.param.get(PARAMS_NAME_ENUM.ATTACK).value) {\n          this.currentState = this.stateMachine.get(PARAMS_NAME_ENUM.ATTACK)\n        } else if (this.param.get(PARAMS_NAME_ENUM.IDLE).value) {\n          this.currentState = this.stateMachine.get(PARAMS_NAME_ENUM.IDLE)\n        } else if (this.param.get(PARAMS_NAME_ENUM.DEATH).value) {\n          this.currentState = this.stateMachine.get(PARAMS_NAME_ENUM.DEATH)\n        } else {\n          this.currentState = this.currentState\n        }\n        break\n      default:\n        this.currentState = this.stateMachine.get(PARAMS_NAME_ENUM.IDLE)\n    }\n  }\n}\n"]}