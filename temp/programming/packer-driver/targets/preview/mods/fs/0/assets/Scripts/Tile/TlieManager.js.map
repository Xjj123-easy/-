{"version":3,"sources":["file:///E:/cocosproject/Dome/cocos-start-demo/assets/Scripts/Tile/TlieManager.ts"],"names":["_decorator","Component","resources","SpriteFrame","Node","Sprite","UITransform","Layers","level","ccclass","TILE_HEIGHT","TILE_WIDTH","TlieManager","init","mapInfo","SpriteFrames","loadDir","i","length","column","j","item","src","type","node","sprite","addComponent","imgSrc","spriteFrame","find","v","name","tranfrom","setContentSize","layer","nameToLayer","setPosition","node1","setParent","Promise","ro","re","err","assets"],"mappings":";;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAYC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;;AAC3EC,MAAAA,K;;;;;;;OACD;AAAEC,QAAAA;AAAF,O,GAAaT,U;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEMU,MAAAA,W,GAAY,E;AACZC,MAAAA,U,GAAW,E;;6BAGJC,W,WADZH,OAAO,CAAC,aAAD,C,gBAAR,MACaG,WADb,SACiCX,SADjC,CAC2C;AAEjCY,QAAAA,IAAI,GAAE;AAAA;;AAAA;AACV,gBAAM;AAACC,cAAAA;AAAD,gBAAU;AAAA;AAAA,0CAAc,CAAd,CAAhB;AAEA,gBAAMC,YAAY,SAAO,KAAI,CAACC,OAAL,EAAzB,CAHU,CAIZ;AAEA;;AACE,iBAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,OAAO,CAACI,MAAtB,EAA6BD,CAAC,EAA9B,EAAiC;AAC/B,kBAAME,MAAM,GAACL,OAAO,CAACG,CAAD,CAApB;;AAD+B,yCAEvBG,CAFuB;AAG3B,oBAAMC,IAAI,GAACF,MAAM,CAACC,CAAD,CAAjB;;AACA,oBAAGC,IAAI,CAACC,GAAL,KAAW,IAAX,IAAiBD,IAAI,CAACE,IAAL,KAAY,IAAhC,EAAqC;AACjC;AACH;;AACD,oBAAMC,IAAI,GAAC,IAAIpB,IAAJ,EAAX;AAEA,oBAAMqB,MAAM,GAACD,IAAI,CAACE,YAAL,CAAkBrB,MAAlB,CAAb;AAEA,oBAAMsB,MAAM,cAAUN,IAAI,CAACC,GAAf,MAAZ;AAEAG,gBAAAA,MAAM,CAACG,WAAP,GAAmBb,YAAY,CAACc,IAAb,CAAkBC,CAAC,IAAEA,CAAC,CAACC,IAAF,KAASJ,MAA9B,KAAuCZ,YAAY,CAAC,CAAD,CAAtE;AAEA,oBAAMiB,QAAQ,GAACP,MAAM,CAACC,YAAP,CAAoBpB,WAApB,CAAf;AAEA0B,gBAAAA,QAAQ,CAACC,cAAT,CAAwBtB,UAAxB,EAAmCD,WAAnC;AAEAc,gBAAAA,IAAI,CAACU,KAAL,GAAW,KAAG3B,MAAM,CAAC4B,WAAP,CAAmB,OAAnB,CAAd;AAEAX,gBAAAA,IAAI,CAACY,WAAL,CAAiBnB,CAAC,GAAGN,UAArB,EAAgC,CAACS,CAAD,GAAGV,WAAnC;AAEA,oBAAM2B,KAAK,GAAC,IAAIjC,IAAJ,EAAZ;AACAiC,gBAAAA,KAAK,CAACD,WAAN,CAAkB,CAAlB,EAAoB,CAApB;AACAZ,gBAAAA,IAAI,CAACc,SAAL,CAAeD,KAAf;AACAA,gBAAAA,KAAK,CAACC,SAAN,CAAgB,KAAI,CAACd,IAArB;AA1B2B;;AAE/B,mBAAI,IAAIJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACD,MAAM,CAACD,MAArB,EAA4BE,CAAC,EAA7B,EAAgC;AAAA,iCAAxBA,CAAwB;;AAAA,yCAGxB;AAsBP;AACF;AAnCS;AAqCX;;AAEDJ,QAAAA,OAAO,GAAE;AAAC;AACR,iBAAO,IAAIuB,OAAJ,CAA2B,CAACC,EAAD,EAAIC,EAAJ,KAAS;AACrCvC,YAAAA,SAAS,CAACc,OAAV,CAAkB,mBAAlB,EAAuCb,WAAvC,EAAoD,UAAUuC,GAAV,EAAeC,MAAf,EAAuB;AACvE,kBAAGD,GAAH,EAAO;AACJD,gBAAAA,EAAE,CAACC,GAAD,CAAF;AACA;AACF;;AACDF,cAAAA,EAAE,CAACG,MAAD,CAAF;AACJ,aANA;AAOH,WARI,CAAP;AAUD;;AApDsC,O","sourcesContent":["\nimport { _decorator, Component, resources, SpriteFrame,Node, Sprite, UITransform, Layers} from 'cc';\nimport level from '../../Level';\nconst { ccclass} = _decorator;\n\n/**\n * Predefined variables\n * Name = BattleManager\n * DateTime = Fri May 19 2023 14:21:20 GMT+0800 (中国标准时间)\n * Author = 杰哥真好\n * FileBasename = BattleManager.ts\n * FileBasenameNoExtension = BattleManager\n * URL = db://assets/Scripts/Scene/BattleManager.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/zh/\n *\n */\n\nconst TILE_HEIGHT=55;\nconst TILE_WIDTH=55;\n\n@ccclass('TlieManager')\nexport class TlieManager extends Component {\n\n    async init(){\n      const {mapInfo}=level[`level${1}`];\n\n      const SpriteFrames=await this.loadDir();\n    //   console.log(SpriteFrames);\n\n    //遍历瓦片数组\n      for(let i=0;i<mapInfo.length;i++){\n        const column=mapInfo[i];\n        for(let j=0;j<column.length;j++){\n            const item=column[j];\n            if(item.src===null||item.type===null){\n                continue;\n            }\n            const node=new Node();\n\n            const sprite=node.addComponent(Sprite);\n\n            const imgSrc=`tile (${item.src})`;\n\n            sprite.spriteFrame=SpriteFrames.find(v=>v.name===imgSrc)||SpriteFrames[0];\n\n            const tranfrom=sprite.addComponent(UITransform);\n\n            tranfrom.setContentSize(TILE_WIDTH,TILE_HEIGHT);\n\n            node.layer=1<<Layers.nameToLayer('UI_2D');\n\n            node.setPosition(i * TILE_WIDTH,-j*TILE_HEIGHT);\n\n            const node1=new Node();\n            node1.setPosition(0,0);\n            node.setParent(node1)\n            node1.setParent(this.node);\n        }\n      }\n\n    }\n\n    loadDir(){//资源批量加载\n      return new Promise<SpriteFrame[]>((ro,re)=>{\n            resources.loadDir('texture/tile/tile', SpriteFrame, function (err, assets) {\n                if(err){\n                   re(err)\n                   return;\n                }\n                ro(assets);\n           });\n        })\n\n    }\n\n}\n\n"]}