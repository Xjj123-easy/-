{"version":3,"sources":["file:///E:/cocosproject/Dome/cocos-start-demo/assets/Scripts/RunTime/MusicManager.ts"],"names":["MusicManager","RenderRoot2D","game","AudioManager","Singleton","creatUINode","Instance","GetInstance","audio","_audio","root","addComponent","faderNode","setParent","init","addPersistRootNode","play","loop","clip","playMusic","sound","name","volumeScale","playSound","stop","destory","removePersistRootNode"],"mappings":";;;wFAKqBA,Y;;;;;;;;;;;;;;;;;;;;;;;AALZC,MAAAA,Y,OAAAA,Y;AAAcC,MAAAA,I,OAAAA,I;;AACdC,MAAAA,Y,iBAAAA,Y;;AACFC,MAAAA,S;;AACEC,MAAAA,W,iBAAAA,W;;;;;;;yBAEYL,Y,GAAN,MAAMA,YAAN;AAAA;AAAA,kCAAqC;AAAA;AAAA;;AAAA,0CACnB,IADmB;;AAAA,wCAEtC,IAFsC;AAAA;;AAG/B,mBAARM,QAAQ,GAAG;AACpB,iBAAO,MAAMC,WAAN,EAAP;AACD;;AACQ,YAALC,KAAK,GAAG;AACV,cAAI,KAAKC,MAAL,KAAgB,IAApB,EAA0B;AACxB,mBAAO,KAAKA,MAAZ;AACD;;AACD,eAAKC,IAAL,GAAY;AAAA;AAAA,2CAAZ;AACA,eAAKA,IAAL,CAAUC,YAAV,CAAuBV,YAAvB;AAEA,gBAAMW,SAAS,GAAG;AAAA;AAAA,2CAAlB;AACAA,UAAAA,SAAS,CAACC,SAAV,CAAoB,KAAKH,IAAzB;AACA,eAAKD,MAAL,GAAcG,SAAS,CAACD,YAAV;AAAA;AAAA,2CAAd;;AACA,eAAKF,MAAL,CAAYK,IAAZ;;AACAZ,UAAAA,IAAI,CAACa,kBAAL,CAAwB,KAAKL,IAA7B;AACA,iBAAO,KAAKD,MAAZ;AACD;;AACDO,QAAAA,IAAI,CAACC,IAAD,EAAgBC,IAAhB,EAAiC;AACnC,iBAAO,KAAKV,KAAL,CAAWW,SAAX,CAAqBF,IAArB,EAA2BC,IAA3B,CAAP;AACD;;AACDE,QAAAA,KAAK,CAACC,IAAD,EAAkBC,WAAlB,EAAwC;AAC3C,iBAAO,KAAKd,KAAL,CAAWe,SAAX,CAAqBF,IAArB,EAA2BC,WAA3B,CAAP;AACD;;AACDE,QAAAA,IAAI,GAAG;AACL,iBAAO,KAAKhB,KAAL,CAAWgB,IAAX,EAAP;AACD;;AACDC,QAAAA,OAAO,GAAG;AACR,eAAKjB,KAAL,CAAWgB,IAAX;AACAtB,UAAAA,IAAI,CAACwB,qBAAL,CAA2B,KAAKhB,IAAhC;AACA,iBAAO,KAAKF,KAAL,CAAWiB,OAAX,EAAP;AACD;;AAjCiD,O","sourcesContent":["import { RenderRoot2D, game, AudioClip } from 'cc'\nimport { AudioManager } from '../Audio/AudioManager'\nimport Singleton from '../Base/Singleton'\nimport { creatUINode } from '../Utiils'\n\nexport default class MusicManager extends Singleton {\n  private _audio: AudioManager = null\n  root: any = null\n  static get Instance() {\n    return super.GetInstance<MusicManager>()\n  }\n  get audio() {\n    if (this._audio !== null) {\n      return this._audio\n    }\n    this.root = creatUINode()\n    this.root.addComponent(RenderRoot2D)\n\n    const faderNode = creatUINode()\n    faderNode.setParent(this.root)\n    this._audio = faderNode.addComponent(AudioManager)\n    this._audio.init()\n    game.addPersistRootNode(this.root)\n    return this._audio\n  }\n  play(loop: boolean, clip: AudioClip) {\n    return this.audio.playMusic(loop, clip)\n  }\n  sound(name: AudioClip, volumeScale?: number) {\n    return this.audio.playSound(name, volumeScale)\n  }\n  stop() {\n    return this.audio.stop()\n  }\n  destory() {\n    this.audio.stop()\n    game.removePersistRootNode(this.root)\n    return this.audio.destory()\n  }\n}\n"]}